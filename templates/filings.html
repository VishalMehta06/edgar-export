<!doctype html>
<html>
<head>
  <title>SEC Filings Exporter - {{ ticker }}</title>
  <script src="/static/app.js" defer></script>
  <style>
	* {
	  box-sizing: border-box;
	}

	body {
	  margin: 0;
	  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
	  background: #f8fafc;
	}

	/* Top Bar */
	.topbar {
	  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
	  color: white;
	  padding: 16px 24px;
	  display: flex;
	  align-items: center;
	  justify-content: space-between;
	  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
	}

	.topbar h1 {
	  margin: 0;
	  font-size: 24px;
	  font-weight: 600;
	}

	.ticker-input-container {
	  display: flex;
	  gap: 8px;
	  align-items: center;
	}

	.ticker-input-container input {
	  padding: 8px 12px;
	  border: 2px solid rgba(255, 255, 255, 0.3);
	  border-radius: 6px;
	  background: rgba(255, 255, 255, 0.15);
	  color: white;
	  font-size: 14px;
	  text-transform: uppercase;
	  min-width: 120px;
	}

	.ticker-input-container input::placeholder {
	  color: rgba(255, 255, 255, 0.6);
	}

	.ticker-input-container input:focus {
	  outline: none;
	  background: rgba(255, 255, 255, 0.25);
	  border-color: rgba(255, 255, 255, 0.5);
	}

	.ticker-input-container button {
	  padding: 8px 16px;
	  background: white;
	  color: #667eea;
	  border: none;
	  border-radius: 6px;
	  font-weight: 600;
	  cursor: pointer;
	  transition: transform 0.2s;
	}

	.ticker-input-container button:hover {
	  transform: scale(1.05);
	}

	.current-ticker {
	  background: rgba(255, 255, 255, 0.2);
	  padding: 6px 12px;
	  border-radius: 6px;
	  font-weight: 600;
	  margin-left: 12px;
	}

	/* Main Content */
	.content {
	  padding: 24px;
	}

	/*Base Table Style*/
    table { border-collapse: collapse; width: 100%; background: white; border-radius: 8px; overflow: hidden; }
    th, td { border: 1px solid #ddd; vertical-align: top; padding: 8px; }
    th { background: #f4f4f4; }
    .report { cursor: pointer; color: #0066cc; margin-bottom: 4px; }
    .report:hover { text-decoration: underline; }
    .category { font-weight: bold; margin-top: 6px; }
	/* Table Color Style*/
	table {
	border-collapse: collapse;
	width: 100%;
	}

	th {
	background: #2c3e50;
	color: white;
	padding: 10px;
	}

	td {
	vertical-align: top;
	padding: 10px;
	background: #f9f9f9;
	}

	td:nth-child(even) {
	background: #f1f5f9;
	}

	.category {
	font-weight: bold;
	color: #555;
	margin-top: 8px;
	border-bottom: 1px solid #ddd;
	}

	.report {
	cursor: pointer;
	color: #2563eb;
	margin: 4px 0;
	}

	.report:hover {
	text-decoration: underline;
	}

	.report.exported {
	color: #166534;
	font-weight: bold;
	cursor: default;
	}

	td.exported {
	background: #dcfce7 !important;
	}

	/* Multiselect Style */
	#filters {
	margin-bottom: 12px;
	padding: 12px 16px;
	background: white;
	border: 1px solid #e5e7eb;
	border-radius: 8px;
	}

	.filter-option {
	margin-right: 12px;
	cursor: pointer;
	}

	h2 {
	  margin-top: 0;
	  margin-bottom: 16px;
	  color: #2c3e50;
	}

  </style>
</head>
<body>

<div class="topbar">
  <div style="display: flex; align-items: center;">
    <h1>ðŸ“Š SEC Filings Exporter</h1>
    <span class="current-ticker">{{ ticker }}</span>
  </div>
  
  <div class="ticker-input-container">
    <input 
      type="text" 
      id="ticker-change" 
      placeholder="Change ticker..." 
      pattern="[A-Za-z]{1,5}"
    >
    <button onclick="changeTicker()">Go</button>
  </div>
</div>

<div class="content">

<div id="filters">
  <strong>Filter filings:</strong>
  {% for form in filing_types %}
    <label class="filter-option">
      <input
        type="checkbox"
        value="{{ form }}"
        checked
      >
      {{ form }}
    </label>
  {% endfor %}
</div>

<h2>Filings</h2>

<table>
  <thead>
    <tr>
      {% for filing in filings %}
        <th data-filing-type="{{ filing.form }}">
		{{ filing.form }}<br>
		{{ filing.filingDate }}
		</th>

      {% endfor %}
    </tr>
  </thead>

  <tbody>
    <tr>
      {% for filing in filings %}
        <td>
          {% for category, reports in filing.reports.items() %}
            <div class="category">{{ category.title() }}</div>

            {% for report in reports %}
              <div
				class="report"
				data-url="{{ report.url }}"
				data-report-name="{{ report.name_short }}"
				data-filing-date="{{ filing.filingDate }}"
				data-filing-type="{{ filing.form }}"
				data-ticker="{{ ticker }}"
				>
				{{ report.name_short }}
			  </div>

            {% endfor %}
          {% endfor %}
        </td>
      {% endfor %}
    </tr>
  </tbody>
</table>

</div>

<script>
function changeTicker() {
  const input = document.getElementById('ticker-change');
  const ticker = input.value.toUpperCase().trim();
  if (ticker && ticker.match(/^[A-Z]{1,5}$/)) {
    window.location.href = `/filings/${ticker}`;
  } else {
    alert('Please enter a valid ticker symbol (1-5 letters)');
  }
}

// Allow Enter key to submit
document.getElementById('ticker-change').addEventListener('keypress', function(e) {
  if (e.key === 'Enter') {
    changeTicker();
  }
});
</script>

</body>
</html>
