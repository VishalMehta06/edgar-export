<!doctype html>
<html>
<head>
  <title>SEC Filings Exporter - {{ ticker }}</title>
  <script src="/static/app.js" defer></script>
  <style>
	* {
	  box-sizing: border-box;
	}

	body {
	  margin: 0;
	  font-family: 'Inter', 'Helvetica Neue', Arial, sans-serif;
	  background: #f3f4f6;
	}

	/* Top Bar */
	.topbar {
	  background: #1f2937;
	  color: white;
	  padding: 16px 24px;
	  display: flex;
	  align-items: center;
	  justify-content: space-between;
	  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
	  border-bottom: 1px solid #374151;
	  position: sticky;
	  top: 0;
	  z-index: 100;
	}

	.topbar h1 {
	  margin: 0;
	  font-size: 20px;
	  font-weight: 600;
	  letter-spacing: -0.3px;
	}

	.ticker-input-container {
	  display: flex;
	  gap: 8px;
	  align-items: center;
	}

	.ticker-input-container input {
	  padding: 8px 12px;
	  border: 1px solid #4b5563;
	  border-radius: 4px;
	  background: #374151;
	  color: white;
	  font-size: 14px;
	  text-transform: uppercase;
	  min-width: 120px;
	  font-family: 'Inter', 'Helvetica Neue', Arial, sans-serif;
	}

	.ticker-input-container input::placeholder {
	  color: #9ca3af;
	}

	.ticker-input-container input:focus {
	  outline: none;
	  background: #4b5563;
	  border-color: #6b7280;
	}

	.ticker-input-container button {
	  padding: 8px 16px;
	  background: #6b7280;
	  color: white;
	  border: none;
	  border-radius: 4px;
	  font-weight: 500;
	  cursor: pointer;
	  transition: background 0.15s;
	  font-family: 'Inter', 'Helvetica Neue', Arial, sans-serif;
	  font-size: 14px;
	}

	.ticker-input-container button:hover {
	  background: #4b5563;
	}

	.current-ticker {
	  background: #374151;
	  padding: 6px 12px;
	  border-radius: 4px;
	  font-weight: 600;
	  margin-left: 12px;
	  border: 1px solid #4b5563;
	  font-size: 14px;
	}

	/* Main Content */
	.content {
	  padding: 24px;
	}

	.table-container {
	  overflow-x: auto;
	}

	.table-wrapper {
	  min-width: fit-content;
	}

	/*Base Table Style*/
    table { 
		border-collapse: collapse; 
		width: 100%; 
		background: white; 
		border-radius: 4px; 
		overflow: hidden;
		border: 1px solid #d1d5db;
	}
    th, td { border: 1px solid #e5e7eb; vertical-align: top; padding: 10px; }
    .report { cursor: pointer; color: #374151; margin-bottom: 4px; }
    .report:hover { text-decoration: underline; }
    .category { font-weight: bold; margin-top: 6px; }

	th {
	background: #374151;
	color: white;
	padding: 12px 10px;
	font-weight: 500;
	font-size: 14px;
	}

	td {
	vertical-align: top;
	padding: 12px 10px;
	background: white;
	font-size: 14px;
	}

	td:nth-child(even) {
	background: #f9fafb;
	}

	.category {
	font-weight: 600;
	color: #1f2937;
	margin-top: 8px;
	margin-bottom: 6px;
	padding-bottom: 4px;
	border-bottom: 1px solid #e5e7eb;
	font-size: 13px;
	text-transform: uppercase;
	letter-spacing: 0.3px;
	}

	.report {
	cursor: pointer;
	color: #4b5563;
	margin: 4px 0;
	padding: 2px 0;
	font-weight: 400;
	}

	.report:hover {
	color: #1f2937;
	text-decoration: underline;
	}

	.report.exported {
	color: #059669;
	font-weight: 500;
	cursor: default;
	}

	td.exported {
	background: #ecfdf5 !important;
	}

	/* Multiselect Style */
	#filters {
	margin: 0;
	padding: 14px 24px;
	background: white;
	border-bottom: 1px solid #d1d5db;
	position: sticky;
	top: 53px;
	z-index: 99;
	box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
	}

	#filters strong {
		color: #1f2937;
		font-weight: 500;
		font-size: 14px;
	}

	.filter-option {
	margin-right: 16px;
	cursor: pointer;
	color: #4b5563;
	font-size: 14px;
	}

	.filter-option input {
		margin-right: 4px;
	}

	h2 {
	  margin-top: 0;
	  margin-bottom: 16px;
	  color: #1f2937;
	  font-weight: 600;
	  font-size: 18px;
	  letter-spacing: -0.3px;
	}

  </style>
</head>
<body>

<div class="topbar">
  <div style="display: flex; align-items: center;">
    <h1>SEC Filings Exporter</h1>
    <span class="current-ticker">{{ ticker }}</span>
  </div>
  
  <div class="ticker-input-container">
    <input 
      type="text" 
      id="ticker-change" 
      placeholder="Ticker..." 
      pattern="[A-Za-z]{1,5}"
    >
    <button onclick="changeTicker()">Go</button>
  </div>
</div>

<div id="filters">
  <strong>Filter filings:</strong>
  {% for form in filing_types %}
    <label class="filter-option">
      <input
        type="checkbox"
        value="{{ form }}"
        checked
      >
      {{ form }}
    </label>
  {% endfor %}
</div>

<div class="content">

<h2>Filings</h2>

<div class="table-container">
<div class="table-wrapper">

<table>
  <thead>
    <tr>
      {% for filing in filings %}
        <th data-filing-type="{{ filing.form }}">
		{{ filing.form }}<br>
		{{ filing.filingDate }}
		</th>

      {% endfor %}
    </tr>
  </thead>

  <tbody>
    <tr>
      {% for filing in filings %}
        <td>
          {% for category, reports in filing.reports.items() %}
            <div class="category">{{ category.title() }}</div>

            {% for report in reports %}
              <div
				class="report"
				data-url="{{ report.url }}"
				data-report-name="{{ report.name_short }}"
				data-filing-date="{{ filing.filingDate }}"
				data-filing-type="{{ filing.form }}"
				data-ticker="{{ ticker }}"
				>
				{{ report.name_short }}
			  </div>

            {% endfor %}
          {% endfor %}
        </td>
      {% endfor %}
    </tr>
  </tbody>
</table>

</div>
</div>

</div>

<script>
function changeTicker() {
  const input = document.getElementById('ticker-change');
  const ticker = input.value.toUpperCase().trim();
  if (ticker && ticker.match(/^[A-Z]{1,5}$/)) {
    window.location.href = `/filings/${ticker}`;
  } else {
    alert('Please enter a valid ticker symbol (1-5 letters)');
  }
}

// Allow Enter key to submit
document.getElementById('ticker-change').addEventListener('keypress', function(e) {
  if (e.key === 'Enter') {
    changeTicker();
  }
});
</script>

</body>
</html>
